{"filter":false,"title":"datageneration.js","tooltip":"/codigo/performance/datageneration.js","undoManager":{"mark":37,"position":37,"stack":[[{"start":{"row":0,"column":0},"end":{"row":102,"column":0},"action":"insert","lines":["var mongodb = require('mongodb');","","var nameList = ['Diego', 'Daniel', 'Sebastian', 'Maximiliano', 'Eduardo', 'Andres', 'Zacarias', 'Cristian', 'Florencia', 'Vanesa', 'Micaela', 'Ailin', 'Kassandra', 'Constanza', 'Victoria', 'Ana'];","var lastNameList = ['Fernandez', 'Perez', 'Vega', 'Jelinek', 'Luna', 'Aniston', 'Gates', 'Brown', 'Castro', 'Montiel', 'Tejedor', 'Bohm', 'Cardenas', 'Smith', 'Kruger', 'Vargas'];","var ageList = [11, 22, 33, 44, 55, 66, 77, 88, 99, 100, 21, 32, 43, 54, 65, 76, 87, 98, 89, 78, 67, 56, 45, 34, 23, 12];","var dateList = [10, 25, 11, 6, 1, 17, 15, 5];","var monthList = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];","var yearList = [2001, 2002, 2003, 2004, 1989, 1990, 1998, 1984, 1932, 1915, 1923];","var occipationList = ['Plomero', 'Arquitecto', 'Mecanico', 'Ing en Sistemas', 'Astronauta', 'Contratista', 'RRHH', 'Artista Independiente', 'Abogado', 'Cronista de Deportes', 'Policia', 'Lic en Turismo'];","var amountOfPeopleToBeCreated = 2000;","var amountOfLoops = 1000;","","var databaseUrl = 'mongodb://localhost:27017/HAT_TEST';","var collectionName = 'HAT_TEST_NOT_INDEXED';","","var chooseItemFromList = function(list) {","\tvar index = Math.floor(Math.random() * list.length);","\treturn list[index];","};","","var createPersonName = function() {","\tvar name = chooseItemFromList(nameList);","\tvar lastName = chooseItemFromList(lastNameList);","\t","\treturn {","\t\t'first': name,","\t\t'last': lastName,","\t\t'full': name + ' ' + lastName ","\t}","};","","var createDate = function() {","\tvar date = chooseItemFromList(dateList);","\tvar month = chooseItemFromList(monthList);","\tvar year = chooseItemFromList(yearList);","","\treturn month + '-' + date + '-' + year;","};","","var createPerson = function(){","\tvar occupationList = [];","\tvar occupationCount = Math.floor((Math.random() * 10) + 1);\t","","\tfor(var i=0; i < occupationCount; i++){","\t\tvar bossCount = Math.floor((Math.random() * 3) + 1);","\t\tvar bossList = [];","\t\tfor(var j=0; j < bossCount; j++){","\t\t\tbossList.push({","\t\t\t\t'name': createPersonName(),\t\t\t\t\t","\t\t\t\t'occupation': chooseItemFromList(occipationList)","\t\t\t});\t","\t\t}","\t\toccupationList.push({","\t\t\t'name': chooseItemFromList(occipationList),","\t\t\t'dateIn': createDate(),","\t\t\t'dateOut': createDate(),","\t\t\t'bossList': bossList","\t\t});","\t}","","\treturn {","\t\t'name': createPersonName(),","\t\t'dateBorn': createDate(),","\t\t'occupationList': occupationList,","\t\t'age': chooseItemFromList(ageList)","\t}","\t","};","","//We need to work with \"MongoClient\" interface in order to connect to a mongodb server.","var MongoClient = mongodb.MongoClient;","MongoClient.connect(databaseUrl, function (err, db) {","  \tif (err) {","    \tconsole.log('Unable to connect to the mongoDB server. Error:', err);","  \t} else {","  \t\t//HURRAY!! We are connected. :)","   \t\tconsole.log('Connection established to', databaseUrl);","","\t\t// Get the documents collection","\t\tvar collection = db.collection(collectionName);","","\t\tvar i = 0;","\t\tsetInterval(function(){ ","\t\t\tvar peopleList = [];","\t\t\tfor(var j=0; j < amountOfPeopleToBeCreated; j++){","\t\t\t\tpeopleList.push(createPerson());","\t\t\t}","","\t\t\t// Insert some users","\t\t\tcollection.insert(peopleList, function (err, result) {","\t  \t\t\tif (err) { console.log(err);","\t  \t\t\t} else { console.log( i + ' DONE' ); }","\t  \t\t\tif (amountOfLoops === i) { db.close(); }","\t\t\t});","","\t\t\ti++;","\t\t\tif (i == amountOfLoops){","\t\t\t\tclearInterval(this);","\t\t\t}","\t\t}, 2000);","\t}","});",""],"id":38}],[{"start":{"row":12,"column":29},"end":{"row":12,"column":38},"action":"remove","lines":["localhost"],"id":39},{"start":{"row":12,"column":29},"end":{"row":12,"column":36},"action":"insert","lines":["mongodb"]}],[{"start":{"row":12,"column":36},"end":{"row":12,"column":37},"action":"insert","lines":["."],"id":40}],[{"start":{"row":12,"column":37},"end":{"row":12,"column":38},"action":"insert","lines":["m"],"id":41}],[{"start":{"row":12,"column":38},"end":{"row":12,"column":39},"action":"insert","lines":["v"],"id":42}],[{"start":{"row":12,"column":39},"end":{"row":12,"column":40},"action":"insert","lines":["a"],"id":43}],[{"start":{"row":12,"column":40},"end":{"row":12,"column":41},"action":"insert","lines":["r"],"id":44}],[{"start":{"row":12,"column":41},"end":{"row":12,"column":42},"action":"insert","lines":["g"],"id":45}],[{"start":{"row":12,"column":42},"end":{"row":12,"column":43},"action":"insert","lines":["a"],"id":46}],[{"start":{"row":12,"column":43},"end":{"row":12,"column":44},"action":"insert","lines":["s"],"id":47}],[{"start":{"row":12,"column":51},"end":{"row":12,"column":54},"action":"remove","lines":["HAT"],"id":48},{"start":{"row":12,"column":51},"end":{"row":12,"column":52},"action":"insert","lines":["D"]}],[{"start":{"row":12,"column":52},"end":{"row":12,"column":53},"action":"insert","lines":["B"],"id":49}],[{"start":{"row":12,"column":53},"end":{"row":12,"column":54},"action":"insert","lines":["_"],"id":50}],[{"start":{"row":12,"column":54},"end":{"row":12,"column":55},"action":"insert","lines":["P"],"id":51}],[{"start":{"row":12,"column":55},"end":{"row":12,"column":56},"action":"insert","lines":["E"],"id":52}],[{"start":{"row":12,"column":56},"end":{"row":12,"column":57},"action":"insert","lines":["R"],"id":53}],[{"start":{"row":12,"column":57},"end":{"row":12,"column":58},"action":"insert","lines":["F"],"id":54}],[{"start":{"row":12,"column":58},"end":{"row":12,"column":59},"action":"insert","lines":["O"],"id":55}],[{"start":{"row":12,"column":59},"end":{"row":12,"column":60},"action":"insert","lines":["R"],"id":56}],[{"start":{"row":12,"column":60},"end":{"row":12,"column":61},"action":"insert","lines":["M"],"id":57}],[{"start":{"row":12,"column":61},"end":{"row":12,"column":62},"action":"insert","lines":["A"],"id":58}],[{"start":{"row":12,"column":62},"end":{"row":12,"column":63},"action":"insert","lines":["N"],"id":59}],[{"start":{"row":12,"column":63},"end":{"row":12,"column":64},"action":"insert","lines":["C"],"id":60}],[{"start":{"row":12,"column":64},"end":{"row":12,"column":65},"action":"insert","lines":["E"],"id":61}],[{"start":{"row":13,"column":22},"end":{"row":13,"column":25},"action":"remove","lines":["HAT"],"id":62},{"start":{"row":13,"column":22},"end":{"row":13,"column":23},"action":"insert","lines":["P"]}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":["E"],"id":63}],[{"start":{"row":13,"column":24},"end":{"row":13,"column":25},"action":"insert","lines":["R"],"id":64}],[{"start":{"row":13,"column":24},"end":{"row":13,"column":25},"action":"remove","lines":["R"],"id":65}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"remove","lines":["E"],"id":66}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":["A"],"id":67}],[{"start":{"row":13,"column":24},"end":{"row":13,"column":25},"action":"insert","lines":["T"],"id":68}],[{"start":{"row":13,"column":25},"end":{"row":13,"column":26},"action":"insert","lines":["A"],"id":69}],[{"start":{"row":13,"column":25},"end":{"row":13,"column":26},"action":"remove","lines":["A"],"id":70}],[{"start":{"row":13,"column":24},"end":{"row":13,"column":25},"action":"remove","lines":["T"],"id":71}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"remove","lines":["A"],"id":72}],[{"start":{"row":13,"column":22},"end":{"row":13,"column":23},"action":"remove","lines":["P"],"id":73}],[{"start":{"row":13,"column":22},"end":{"row":13,"column":23},"action":"insert","lines":["D"],"id":74}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":["B"],"id":75}]]},"ace":{"folds":[],"customSyntax":"javascript","scrolltop":0,"scrollleft":0,"selection":{"start":{"row":12,"column":29},"end":{"row":12,"column":36},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1465927860064,"hash":"e74d116de9f43af14a76efb2e69ee27c07f3e2db"}